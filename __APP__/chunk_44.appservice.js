__wxCodeSpace__.batchAddCompiledTemplate(function(G,R,D,Q,gdc,X,Y,Z,RG={}){var P=RG.P||function(a){return typeof a==='function'?a:()=>{}};return {'component/vant-weapp/dist/uploader/index':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};var a=R["component/vant-weapp/dist/wxs/utils"]();var b=R["component/vant-weapp/dist/uploader/index"]();H[""]=(R,C,D,U)=>{R.setFnFilter(Q.A,Q.B);if(typeof R.setEventListenerWrapper==='function')R.setEventListenerWrapper(Q.C);var L=R.c,M=R.m,O=R.r,A={},K=U===true,f=(C,g,h,i,j,k,T,E,B)=>{var l,o,q=(C)=>{},r=(C)=>{},t=(C)=>{},u=(C,T)=>{C||K||!!(Z(i,"name")||Z(i,"url"))||undefined?T(Y(X(g).name||X(g).url)):T()},s=(C,T,E)=>{E("van-icon",{},(N,C)=>{if(C)L(N,"van-uploader__file-icon");if(C)O(N,"name","description")},t);E("view",{},(N,C)=>{if(C)L(N,"van-uploader__file-name van-ellipsis")},u)},p=(C,T,E)=>{if(o===1){E("image",{},(N,C)=>{if(C)L(N,"van-uploader__preview-image");if(C||K||!!(Z(undefined,"sizeStyle")||Q.b({previewSize:U.previewSize}))||undefined)R.y(N,P(X(b).sizeStyle)({previewSize:D.previewSize}));if(C||K||U.imageFit)O(N,"mode",D.imageFit);if(C||K||!!(Z(i,"thumb")||Z(i,"url"))||undefined)O(N,"src",X(g).thumb||X(g).url);if(C||K||!!(Z(i,"name")||j)||undefined)O(N,"alt",X(g).name||"图片"+h);if(C)O(N,"bindtap","onPreviewImage");if(C||K||j)R.d(N,"index",h)},q)}else if(o===2){E("video",{},(N,C)=>{if(C)L(N,"van-uploader__preview-image");if(C||K||!!(Z(undefined,"sizeStyle")||Q.b({previewSize:U.previewSize}))||undefined)R.y(N,P(X(b).sizeStyle)({previewSize:D.previewSize}));if(C||K||Z(i,"url"))O(N,"src",X(g).url);if(C||K||!!(Z(i,"name")||j)||undefined)O(N,"title",X(g).name||"视频"+h);if(C||K||Z(i,"thumb"))O(N,"poster",X(g).thumb);if(C||K||Z(i,"autoplay"))O(N,"autoplay",X(g).autoplay);if(C)O(N,"bindtap","onPreviewVideo");if(C||K||j)R.d(N,"index",h)},r)}else{E("view",{},(N,C)=>{if(C)L(N,"van-uploader__file");if(C||K||!!(Z(undefined,"sizeStyle")||Q.b({previewSize:U.previewSize}))||undefined)R.y(N,P(X(b).sizeStyle)({previewSize:D.previewSize}));if(C)O(N,"bindtap","onPreviewFile");if(C||K||j)R.d(N,"index",h)},s)}},v,y,A0=(C)=>{},B0=(C)=>{},z=(C,T,E)=>{if(y===1){E("van-icon",{},(N,C)=>{if(C)L(N,"van-uploader__mask-icon");if(C)O(N,"name","close")},A0)}else{E("van-loading",{},(N,C)=>{if(C)O(N,"custom-class","van-uploader__loading")},B0)}},C0,E0=(C,T)=>{C||K||Z(i,"message")?T(Y(X(g).message)):T()},D0=(C,T,E)=>{if(C0===1){E("text",{},(N,C)=>{if(C)L(N,"van-uploader__mask-message")},E0)}},x=(C,T,E,B)=>{y=X(g).status==="failed"?1:0;B(y,z);C0=X(g).message?1:0;B(C0,D0)},w=(C,T,E)=>{if(v===1){E("view",{},(N,C)=>{if(C)L(N,"van-uploader__mask")},x)}},F0,I0=(C)=>{},H0=(C,T,E)=>{E("van-icon",{},(N,C)=>{if(C)L(N,"van-uploader__preview-delete-icon");if(C)O(N,"name","cross")},I0)},G0=(C,T,E)=>{if(F0===1){E("view",{},(N,C)=>{if(C)L(N,"van-uploader__preview-delete");if(C||K||j)R.d(N,"index",h);if(C)R.v(N,"tap","deleteItem",!0,!1,!1,!1)},H0)}},n=(C,T,E,B)=>{o=X(g).isImage?1:X(g).isVideo?2:0;B(o,p);v=X(g).status==="uploading"||X(g).status==="failed"?1:0;B(v,w);F0=D.deletable&&X(g).deletable?1:0;B(F0,G0)},m=(C,T,E)=>{if(l===1){E("view",{},(N,C)=>{if(C)L(N,"van-uploader__preview");if(C)O(N,"bindtap","onClickPreview");if(C||K||j)R.d(N,"index",h)},n)}};l=D.previewImage?1:0;B(l,m)},g,i=(C,T,E,B,F,S)=>{S("")},j,m=(C)=>{},n,p=(C,T)=>{C||K||U.uploadText?T(Y(D.uploadText)):T()},o=(C,T,E)=>{if(n===1){E("text",{},(N,C)=>{if(C)L(N,"van-uploader__upload-text")},p)}},l=(C,T,E,B)=>{E("van-icon",{},(N,C)=>{if(C)L(N,"van-uploader__upload-icon");if(C||K||U.uploadIcon)O(N,"name",D.uploadIcon)},m);n=D.uploadText?1:0;B(n,o)},k=(C,T,E)=>{if(j===1){E("view",{},(N,C)=>{var $A=D.disabled;if(C||K||!!(U.disabled||($A?undefined:undefined))||undefined)L(N,"van-uploader__upload "+Y($A?"van-uploader__upload--disabled":""));if(C||K||!!(Z(undefined,"sizeStyle")||Q.b({previewSize:U.previewSize}))||undefined)R.y(N,P(X(b).sizeStyle)({previewSize:D.previewSize}));if(C)O(N,"bindtap","startUpload")},l)}},h=(C,T,E,B)=>{if(g===1){E("view",{},(N,C)=>{if(C)L(N,"van-uploader__slot");if(C)O(N,"bindtap","startUpload")},i);j=D.showUpload?1:0;B(j,k)}},e=(C,T,E,B,F)=>{F(D.lists,"index",U?U.lists:undefined,[0,"lists"],f);g=D.isInCount?1:0;B(g,h)},d=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"van-uploader__wrapper")},e)},c=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"van-uploader")},d)};;return {C:c,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),'pages/driver/errorSubmit/errorSubmit':(()=>{var H={};var S;var I=(P)=>{if(!S)S=Object.assign({},H);return S[P]};H[""]=(R,C,D,U)=>{var L=R.c,M=R.m,O=R.r,A={"fileList":new Array(1),"message":new Array(1)},K=U===true,c=(C)=>{},b=(C,T,E)=>{E("van-uploader",{},(N,C)=>{if(C||K||U.fileList)O(N,"file-list",D.fileList);A["fileList"][0]=(D,E,T)=>{O(N,"file-list",D.fileList);E(N)};if(C)O(N,"accept","media");if(C)O(N,"multiple","true");if(C)O(N,"preview-size","100px");if(C)R.v(N,"after-read","afterRead",!1,!1,!1,!1);if(C)R.v(N,"delete","deleteMedia",!1,!1,!1,!1)},c)},e=(C)=>{},d=(C,T,E)=>{E("van-field",{},(N,C)=>{if(C||K||U.message)O(N,"value",D.message,["message"]);A["message"][0]=(D,E,T)=>{O(N,"value",D.message,["message"]);E(N)};if(C)O(N,"label","描述");if(C)O(N,"type","textarea");if(C)O(N,"placeholder","请输入描述内容");if(C)O(N,"autosize",true);if(C)O(N,"clearable",true);if(C||K||undefined)O(N,"border",false)},e)},f=(C,T)=>{C?T("确定"):T()},g=(C)=>{},a=(C,T,E)=>{E("view",{},(N,C)=>{if(C)L(N,"uploader")},b);E("van-cell-group",{},(N,C)=>{},d);E("van-button",{},(N,C)=>{if(C)O(N,"custom-class","uploadFile");if(C)O(N,"block",true);if(C)O(N,"color","linear-gradient(to right , #1fbbfd ,#169bd5)");if(C)R.v(N,"click","uploadFile",!1,!1,!1,!1)},f);E("van-toast",{},(N,C)=>{if(C)R.i(N,"van-toast")},g)};;return {C:a,B:A}};return Object.assign(function(R){return H[R]},{_:H})})(),}});;__wxRoute = "component/vant-weapp/dist/uploader/index";__wxRouteBegin = true;__wxAppCurrentFile__="component/vant-weapp/dist/uploader/index.js";define("component/vant-weapp/dist/uploader/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var e=require("../common/component"),t=require("./utils"),i=require("./shared"),a=require("../common/validator");(0,e.VantComponent)({props:Object.assign(Object.assign({disabled:Boolean,multiple:Boolean,uploadText:String,useBeforeRead:Boolean,afterRead:null,beforeRead:null,previewSize:{type:null,value:80},name:{type:null,value:""},accept:{type:String,value:"image"},fileList:{type:Array,value:[],observer:"formatFileList"},maxSize:{type:Number,value:Number.MAX_VALUE},maxCount:{type:Number,value:100},deletable:{type:Boolean,value:!0},showUpload:{type:Boolean,value:!0},previewImage:{type:Boolean,value:!0},previewFullImage:{type:Boolean,value:!0},imageFit:{type:String,value:"scaleToFill"},uploadIcon:{type:String,value:"photograph"}},i.chooseImageProps),i.chooseVideoProps),data:{lists:[],isInCount:!0},methods:{formatFileList:function(){var e=this.data,i=e.fileList,n=void 0===i?[]:i,s=e.maxCount,o=n.map((function(e){return Object.assign(Object.assign({},e),{isImage:(0,t.isImageFile)(e),isVideo:(0,t.isVideoFile)(e),deletable:!(0,a.isBoolean)(e.deletable)||e.deletable})}));this.setData({lists:o,isInCount:o.length<s})},getDetail:function(e){return{name:this.data.name,index:null==e?this.data.fileList.length:e}},startUpload:function(){var e=this,i=this.data,a=i.maxCount,n=i.multiple,s=i.lists;i.disabled||(0,t.chooseFile)(Object.assign(Object.assign({},this.data),{maxCount:a-s.length})).then((function(t){e.onBeforeRead(n?t:t[0])})).catch((function(t){e.$emit("error",t)}))},onBeforeRead:function(e){var t=this,i=this.data,n=i.beforeRead,s=i.useBeforeRead,o=!0;"function"==typeof n&&(o=n(e,this.getDetail())),s&&(o=new Promise((function(i,a){t.$emit("before-read",Object.assign(Object.assign({file:e},t.getDetail()),{callback:function(e){e?i():a()}}))}))),o&&((0,a.isPromise)(o)?o.then((function(i){return t.onAfterRead(i||e)})):this.onAfterRead(e))},onAfterRead:function(e){var t=this.data,i=t.maxSize,a=t.afterRead;(Array.isArray(e)?e.some((function(e){return e.size>i})):e.size>i)?this.$emit("oversize",Object.assign({file:e},this.getDetail())):("function"==typeof a&&a(e,this.getDetail()),this.$emit("after-read",Object.assign({file:e},this.getDetail())))},deleteItem:function(e){var t=e.currentTarget.dataset.index;this.$emit("delete",Object.assign(Object.assign({},this.getDetail(t)),{file:this.data.fileList[t]}))},onPreviewImage:function(e){if(this.data.previewFullImage){var i=e.currentTarget.dataset.index,a=this.data.lists,n=a[i];wx.previewImage({urls:a.filter((function(e){return(0,t.isImageFile)(e)})).map((function(e){return e.url})),current:n.url,fail:function(){wx.showToast({title:"预览图片失败",icon:"none"})}})}},onPreviewVideo:function(e){if(this.data.previewFullImage){var i=e.currentTarget.dataset.index,a=this.data.lists;wx.previewMedia({sources:a.filter((function(e){return(0,t.isVideoFile)(e)})).map((function(e){return Object.assign(Object.assign({},e),{type:"video"})})),current:i,fail:function(){wx.showToast({title:"预览视频失败",icon:"none"})}})}},onPreviewFile:function(e){var t=e.currentTarget.dataset.index;wx.openDocument({filePath:this.data.lists[t].url,showMenu:!0})},onClickPreview:function(e){var t=e.currentTarget.dataset.index,i=this.data.lists[t];this.$emit("click-preview",Object.assign(Object.assign({},i),this.getDetail(t)))}}});
},{isPage:false,isComponent:true,currentFile:'component/vant-weapp/dist/uploader/index.js'});require("component/vant-weapp/dist/uploader/index.js");;__wxRoute = "pages/driver/errorSubmit/errorSubmit";__wxRouteBegin = true;__wxAppCurrentFile__="pages/driver/errorSubmit/errorSubmit.js";define("pages/driver/errorSubmit/errorSubmit.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";var a,t=require("../../../@babel/runtime/helpers/objectSpread2"),e=(a=require("../../../component/vant-weapp/dist/toast/toast"))&&a.__esModule?a:{default:a};var i=getApp();Page({data:{message:"",fileList:[]},onLoad:function(a){this.setData({taskId:a.taskId})},afterRead:function(a){var e=a.detail.file,i=this.data.fileList,n=void 0===i?[]:i;Array.isArray(e)?n.push.apply(n,e):n.push(t({},e)),this.setData({fileList:n})},uploadFile:function(){var a=this;if(a.data.uploading)return!1;wx.showLoading({title:"上传中",mask:!0}),a.setData({uploading:!0});for(var t=a.data.fileList,n=(new Date).getTime(),o=function(o){var s=t[o];wx.uploadFile({url:i.globalData.baseUrl+"/driver/upload",filePath:s.url,name:"file",header:{"content-type":"multipart/form-data",token:i.globalData.jwt},formData:{user:i.globalData.driver.id,message:a.data.message,taskId:a.data.taskId,stmp:n,type:s.type},complete:function(i){JSON.parse(i.data).meta.success?o==t.length-1&&(wx.hideLoading(),(0,e.default)({type:"success",message:"反馈成功",onClose:function(){wx.navigateBack()}})):(wx.hideLoading(),e.default.fail("反馈失败")),a.setData({uploading:!1})}})},s=0;s<t.length;s++)o(s);wx.hideLoading()},deleteMedia:function(a){var t=a.detail.index,e=this.data.fileList,i=void 0===e?[]:e;i.splice(t,1),this.setData({fileList:i})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});
},{isPage:true,isComponent:true,currentFile:'pages/driver/errorSubmit/errorSubmit.js'});require("pages/driver/errorSubmit/errorSubmit.js");